<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Speech Translator</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="app-title">
                    <i class="fas fa-language"></i>
                    Real-Time Speech Translator
                </h1>
                <p class="app-subtitle">Speak in one language, see it translated instantly</p>
                
                <!-- Theme Toggle -->
                <button id="theme-toggle" class="theme-toggle" title="Toggle Dark/Light Theme" aria-label="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- Performance Dashboard -->
        <section class="performance-section">
            <div class="performance-dashboard" id="performance-dashboard">
                <button class="performance-toggle-btn" id="performance-toggle-btn" title="Toggle performance dashboard (Ctrl+P)">
                    <i class="fas fa-chart-line"></i>
                    <span class="performance-indicator" id="performance-indicator">âš¡</span>
                </button>
                <div class="performance-panel hidden" id="performance-panel">
                    <div class="performance-header">
                        <h3><i class="fas fa-tachometer-alt"></i> Performance Dashboard</h3>
                        <button class="close-performance-btn" id="close-performance-btn" title="Close dashboard">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="performance-content">
                        <div class="performance-grid">
                            <div class="metric-card">
                                <div class="metric-label">Total Translations</div>
                                <div class="metric-value" id="total-translations">0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Cache Hit Rate</div>
                                <div class="metric-value" id="cache-hit-rate">0%</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Average Latency</div>
                                <div class="metric-value" id="average-latency">0ms</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">API Calls</div>
                                <div class="metric-value" id="api-calls">0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Cache Size</div>
                                <div class="metric-value" id="cache-size">0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Queue Size</div>
                                <div class="metric-value" id="queue-size">0</div>
                            </div>
                        </div>
                        <div class="performance-actions">
                            <button class="action-btn clear-cache-btn" id="clear-cache-btn" title="Clear translation cache">
                                <i class="fas fa-trash"></i> Clear Cache
                            </button>
                            <button class="action-btn refresh-stats-btn" id="refresh-stats-btn" title="Refresh statistics">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bonus Features Panel -->
        <section class="bonus-features-section">
            <div class="bonus-features-toggle">
                <button class="bonus-toggle-btn" id="bonus-toggle-btn" title="Toggle bonus features (Ctrl+B)">
                    <i class="fas fa-magic"></i>
                    <span>Bonus Features</span>
                </button>
            </div>
            
            <div class="bonus-features-panel hidden" id="bonus-features-panel">
                <div class="bonus-features-grid">
                    <!-- Conversation Mode -->
                    <div class="bonus-feature-card">
                        <div class="feature-header">
                            <i class="fas fa-comments"></i>
                            <h4>Conversation Mode</h4>
                        </div>
                        <p>Enable back-and-forth conversation translation</p>
                        <div class="feature-controls">
                            <button class="feature-btn" id="conversation-mode-btn" title="Toggle conversation mode">
                                <i class="fas fa-play"></i> Start Conversation
                            </button>
                            <div class="conversation-participants hidden" id="conversation-participants">
                                <div class="participant">
                                    <label>Person A speaks:</label>
                                    <select id="participant-a-lang" class="mini-dropdown"></select>
                                </div>
                                <div class="participant">
                                    <label>Person B speaks:</label>
                                    <select id="participant-b-lang" class="mini-dropdown"></select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Text-to-Speech -->
                    <div class="bonus-feature-card">
                        <div class="feature-header">
                            <i class="fas fa-volume-up"></i>
                            <h4>Text-to-Speech</h4>
                        </div>
                        <p>Hear translations spoken aloud</p>
                        <div class="feature-controls">
                            <div class="tts-controls">
                                <label>Voice Speed:</label>
                                <input type="range" id="tts-rate" min="0.5" max="2" step="0.1" value="1">
                                <span id="tts-rate-value">1.0x</span>
                            </div>
                            <div class="tts-controls">
                                <label>Voice Pitch:</label>
                                <input type="range" id="tts-pitch" min="0.5" max="2" step="0.1" value="1">
                                <span id="tts-pitch-value">1.0</span>
                            </div>
                            <button class="feature-btn" id="test-tts-btn" title="Test text-to-speech">
                                <i class="fas fa-play"></i> Test Voice
                            </button>
                        </div>
                    </div>

                    <!-- Export & Share -->
                    <div class="bonus-feature-card">
                        <div class="feature-header">
                            <i class="fas fa-share-alt"></i>
                            <h4>Export & Share</h4>
                        </div>
                        <p>Export conversations and create shareable links</p>
                        <div class="feature-controls">
                            <button class="feature-btn" id="export-conversation-btn" title="Export current conversation">
                                <i class="fas fa-file-export"></i> Export Conversation
                            </button>
                            <button class="feature-btn" id="create-share-link-btn" title="Create shareable link">
                                <i class="fas fa-link"></i> Create Share Link
                            </button>
                            <button class="feature-btn" id="download-audio-btn" title="Download audio recording">
                                <i class="fas fa-microphone"></i> Download Audio
                            </button>
                        </div>
                    </div>

                    <!-- Pronunciation Guide -->
                    <div class="bonus-feature-card">
                        <div class="feature-header">
                            <i class="fas fa-language"></i>
                            <h4>Pronunciation Guide</h4>
                        </div>
                        <p>Get pronunciation help for translated text</p>
                        <div class="feature-controls">
                            <button class="feature-btn" id="show-pronunciation-btn" title="Show pronunciation guide">
                                <i class="fas fa-eye"></i> Show Pronunciation
                            </button>
                            <div class="pronunciation-display hidden" id="pronunciation-display">
                                <div class="pronunciation-text" id="pronunciation-text"></div>
                                <button class="play-pronunciation-btn" id="play-pronunciation-btn">
                                    <i class="fas fa-play"></i> Play
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Vocabulary -->
                    <div class="bonus-feature-card">
                        <div class="feature-header">
                            <i class="fas fa-book"></i>
                            <h4>Custom Vocabulary</h4>
                        </div>
                        <p>Save frequently used phrases and translations</p>
                        <div class="feature-controls">
                            <button class="feature-btn" id="manage-vocabulary-btn" title="Manage custom vocabulary">
                                <i class="fas fa-cog"></i> Manage Phrases
                            </button>
                            <div class="quick-phrases" id="quick-phrases">
                                <label>Quick Phrases:</label>
                                <select id="quick-phrases-select" class="mini-dropdown">
                                    <option value="">Select a phrase...</option>
                                </select>
                                <button class="insert-phrase-btn" id="insert-phrase-btn" title="Insert selected phrase">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Settings -->
                    <div class="bonus-feature-card">
                        <div class="feature-header">
                            <i class="fas fa-cogs"></i>
                            <h4>Advanced Settings</h4>
                        </div>
                        <p>Fine-tune translation and speech settings</p>
                        <div class="feature-controls">
                            <div class="setting-row">
                                <label>Auto-speak translations:</label>
                                <input type="checkbox" id="auto-speak-checkbox">
                            </div>
                            <div class="setting-row">
                                <label>Auto-save conversations:</label>
                                <input type="checkbox" id="auto-save-checkbox">
                            </div>
                            <div class="setting-row">
                                <label>Translation confidence threshold:</label>
                                <input type="range" id="confidence-threshold" min="0" max="1" step="0.1" value="0.7">
                                <span id="confidence-value">70%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Custom Vocabulary Modal -->
        <div class="modal hidden" id="vocabulary-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-book"></i> Custom Vocabulary Manager</h3>
                    <button class="close-modal-btn" id="close-vocabulary-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="add-phrase-section">
                        <h4>Add New Phrase</h4>
                        <div class="phrase-inputs">
                            <input type="text" id="new-phrase-original" placeholder="Original text..." maxlength="200">
                            <input type="text" id="new-phrase-translation" placeholder="Translation..." maxlength="200">
                            <select id="new-phrase-category" class="mini-dropdown">
                                <option value="general">General</option>
                                <option value="business">Business</option>
                                <option value="travel">Travel</option>
                                <option value="medical">Medical</option>
                                <option value="education">Education</option>
                                <option value="food">Food & Dining</option>
                                <option value="shopping">Shopping</option>
                                <option value="emergency">Emergency</option>
                            </select>
                            <button class="add-phrase-btn" id="add-phrase-btn">
                                <i class="fas fa-plus"></i> Add Phrase
                            </button>
                        </div>
                    </div>
                    <div class="phrases-list-section">
                        <h4>Saved Phrases</h4>
                        <div class="phrases-filter">
                            <select id="phrases-filter-category" class="mini-dropdown">
                                <option value="">All Categories</option>
                                <option value="general">General</option>
                                <option value="business">Business</option>
                                <option value="travel">Travel</option>
                                <option value="medical">Medical</option>
                                <option value="education">Education</option>
                                <option value="food">Food & Dining</option>
                                <option value="shopping">Shopping</option>
                                <option value="emergency">Emergency</option>
                            </select>
                            <input type="text" id="phrases-search" placeholder="Search phrases...">
                        </div>
                        <div class="phrases-list" id="phrases-list">
                            <!-- Phrases will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Language Selection -->
        <section class="language-section">
            <div class="language-selector">
                <div class="language-group">
                    <label for="source-lang">From:</label>
                    <select id="source-lang" class="language-dropdown">
                        <option value="en-US">English (US)</option>
                        <option value="en-GB">English (UK)</option>
                        <option value="es-ES">Spanish (Spain)</option>
                        <option value="es-MX">Spanish (Mexico)</option>
                        <option value="fr-FR">French</option>
                        <option value="de-DE">German</option>
                        <option value="it-IT">Italian</option>
                        <option value="pt-PT">Portuguese (Portugal)</option>
                        <option value="pt-BR">Portuguese (Brazil)</option>
                        <option value="hi-IN">Hindi</option>
                        <option value="zh-CN">Chinese (Mandarin)</option>
                        <option value="ja-JP">Japanese</option>
                        <option value="ko-KR">Korean</option>
                        <option value="ar-SA">Arabic</option>
                        <option value="ru-RU">Russian</option>
                        <option value="nl-NL">Dutch</option>
                        <option value="sv-SE">Swedish</option>
                        <option value="da-DK">Danish</option>
                        <option value="no-NO">Norwegian</option>
                        <option value="fi-FI">Finnish</option>
                        <option value="tr-TR">Turkish</option>
                        <option value="pl-PL">Polish</option>
                        <option value="cs-CZ">Czech</option>
                        <option value="hu-HU">Hungarian</option>
                        <option value="ro-RO">Romanian</option>
                    </select>
                </div>

                <button id="swap-languages" class="swap-btn" title="Swap Languages (Ctrl+S)">
                    <i class="fas fa-exchange-alt"></i>
                </button>

                <div class="language-group">
                    <label for="target-lang">To:</label>
                    <select id="target-lang" class="language-dropdown">
                        <option value="es">Spanish</option>
                        <option value="en">English</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="hi">Hindi</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="ar">Arabic</option>
                        <option value="ru">Russian</option>
                        <option value="nl">Dutch</option>
                        <option value="sv">Swedish</option>
                        <option value="da">Danish</option>
                        <option value="no">Norwegian</option>
                        <option value="fi">Finnish</option>
                        <option value="tr">Turkish</option>
                        <option value="pl">Polish</option>
                        <option value="cs">Czech</option>
                        <option value="hu">Hungarian</option>
                        <option value="ro">Romanian</option>
                        <option value="bg">Bulgarian</option>
                        <option value="hr">Croatian</option>
                        <option value="sk">Slovak</option>
                        <option value="sl">Slovenian</option>
                        <option value="et">Estonian</option>
                        <option value="lv">Latvian</option>
                        <option value="lt">Lithuanian</option>
                        <option value="mt">Maltese</option>
                        <option value="el">Greek</option>
                        <option value="he">Hebrew</option>
                        <option value="th">Thai</option>
                        <option value="vi">Vietnamese</option>
                        <option value="id">Indonesian</option>
                        <option value="ms">Malay</option>
                        <option value="tl">Filipino</option>
                        <option value="ur">Urdu</option>
                        <option value="bn">Bengali</option>
                        <option value="ta">Tamil</option>
                        <option value="te">Telugu</option>
                        <option value="kn">Kannada</option>
                        <option value="ml">Malayalam</option>
                        <option value="gu">Gujarati</option>
                        <option value="pa">Punjabi</option>
                        <option value="mr">Marathi</option>
                        <option value="ne">Nepali</option>
                        <option value="si">Sinhala</option>
                        <option value="my">Myanmar</option>
                        <option value="km">Khmer</option>
                        <option value="lo">Lao</option>
                        <option value="ka">Georgian</option>
                        <option value="am">Amharic</option>
                        <option value="sw">Swahili</option>
                        <option value="zu">Zulu</option>
                        <option value="af">Afrikaans</option>
                        <option value="is">Icelandic</option>
                        <option value="ga">Irish</option>
                        <option value="cy">Welsh</option>
                        <option value="eu">Basque</option>
                        <option value="ca">Catalan</option>
                        <option value="gl">Galician</option>
                        <option value="eo">Esperanto</option>
                        <option value="la">Latin</option>
                    </select>
                </div>
            </div>

            <!-- Popular Language Shortcuts -->
            <div class="popular-languages">
                <div class="shortcuts-header">
                    <span class="shortcuts-label">Popular:</span>
                </div>
                <div class="language-shortcuts">
                    <button class="lang-shortcut" data-source="en-US" data-target="es" title="English to Spanish">
                        ðŸ‡ºðŸ‡¸ â†’ ðŸ‡ªðŸ‡¸
                    </button>
                    <button class="lang-shortcut" data-source="en-US" data-target="fr" title="English to French">
                        ðŸ‡ºðŸ‡¸ â†’ ðŸ‡«ðŸ‡·
                    </button>
                    <button class="lang-shortcut" data-source="en-US" data-target="de" title="English to German">
                        ðŸ‡ºðŸ‡¸ â†’ ðŸ‡©ðŸ‡ª
                    </button>
                    <button class="lang-shortcut" data-source="en-US" data-target="zh" title="English to Chinese">
                        ðŸ‡ºðŸ‡¸ â†’ ðŸ‡¨ðŸ‡³
                    </button>
                    <button class="lang-shortcut" data-source="es-ES" data-target="en" title="Spanish to English">
                        ðŸ‡ªðŸ‡¸ â†’ ðŸ‡ºðŸ‡¸
                    </button>
                    <button class="lang-shortcut" data-source="fr-FR" data-target="en" title="French to English">
                        ðŸ‡«ðŸ‡· â†’ ðŸ‡ºðŸ‡¸
                    </button>
                    <button class="lang-shortcut" data-source="de-DE" data-target="en" title="German to English">
                        ðŸ‡©ðŸ‡ª â†’ ðŸ‡ºðŸ‡¸
                    </button>
                    <button class="lang-shortcut" data-source="hi-IN" data-target="en" title="Hindi to English">
                        ðŸ‡®ðŸ‡³ â†’ ðŸ‡ºðŸ‡¸
                    </button>
                </div>
            </div>
        </section>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Audio Controls -->
            <section class="audio-controls">
                <div class="mic-container">
                    <button id="mic-button" class="mic-button" title="Click to start speaking" aria-label="Start/Stop Recording">
                        <i class="fas fa-microphone"></i>
                        <span class="mic-text">Click to Speak</span>
                    </button>
                    
                    <!-- Audio Visualizer -->
                    <div class="audio-visualizer" id="audio-visualizer">
                        <div class="visualizer-bar"></div>
                        <div class="visualizer-bar"></div>
                        <div class="visualizer-bar"></div>
                        <div class="visualizer-bar"></div>
                        <div class="visualizer-bar"></div>
                        <div class="visualizer-bar"></div>
                        <div class="visualizer-bar"></div>
                    </div>
                </div>
                
                <div class="audio-status">
                    <div class="status-indicator">
                        <span class="status-dot" id="status-dot"></span>
                        <span id="status-text">Ready to translate</span>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="quick-btn" id="clear-all" title="Clear all text (Ctrl+Shift+C)" aria-label="Clear All Text">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="quick-btn" id="history-btn" title="Translation history (Ctrl+H)" aria-label="Translation History">
                            <i class="fas fa-history"></i>
                        </button>
                        <button class="quick-btn" id="settings-btn" title="Settings (Ctrl+,)" aria-label="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Translation Display -->
            <section class="translation-display">
                <!-- Speech Input Area -->
                <div class="input-area">
                    <div class="area-header">
                        <h3><i class="fas fa-microphone-alt"></i> What you're saying</h3>
                        <div class="header-actions">
                            <span class="confidence-indicator" id="confidence-indicator" title="Recognition Confidence">
                                <i class="fas fa-signal"></i>
                                <span class="confidence-text">--</span>
                            </span>
                            <button class="copy-btn" id="copy-input" title="Copy text (Ctrl+C)" aria-label="Copy Input Text">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="text-display" id="speech-input">
                        <div class="placeholder-text">
                            <i class="fas fa-microphone-alt"></i>
                            <p>Your speech will appear here...</p>
                            <small>Supports: English, Spanish, French, German, and more</small>
                        </div>
                    </div>
                    <div class="area-footer">
                        <small class="text-info">
                            <i class="fas fa-info-circle"></i>
                            Press <kbd>Ctrl + Space</kbd> to start/stop recording
                        </small>
                    </div>
                </div>

                <!-- Translation Output Area -->
                <div class="output-area">
                    <div class="area-header">
                        <h3><i class="fas fa-globe"></i> Translation</h3>
                        <div class="header-actions">
                            <button class="copy-btn" id="copy-output" title="Copy translation (Ctrl+Shift+C)" aria-label="Copy Translation">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="text-display" id="translation-output">
                        <div class="placeholder-text">
                            <i class="fas fa-globe"></i>
                            <p>Translation will appear here...</p>
                            <small>Instant translation to your selected language</small>
                        </div>
                    </div>
                    <div class="area-footer">
                        <small class="text-info">
                            <i class="fas fa-magic"></i>
                            Powered by advanced translation AI
                        </small>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 Real-Time Speech Translator | Built with Web APIs</p>
        </footer>
    </div>

    <!-- Translation History Panel -->
    <div id="history-panel" class="history-panel hidden">
        <div class="history-content">
            <div class="history-header">
                <h2><i class="fas fa-history"></i> Translation History</h2>
                <div class="history-actions">
                    <button class="action-btn" id="export-history" title="Export history as JSON" aria-label="Export History">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn" id="clear-history" title="Clear all history" aria-label="Clear History">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                    <button class="close-btn" id="close-history" title="Close history panel" aria-label="Close History">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="history-body">
                <div class="history-list" id="history-list">
                    <div class="no-history">
                        <i class="fas fa-inbox"></i>
                        <p>No translations in history yet</p>
                        <small>Your translation history will appear here</small>
                    </div>
                </div>
            </div>
            <div class="history-footer">
                <div class="history-stats">
                    <span id="history-count">0 translations</span>
                    <span class="separator">â€¢</span>
                    <span id="history-size">0 KB</span>
                </div>
                <div class="history-shortcuts">
                    <small>
                        <kbd>Ctrl+H</kbd> Toggle â€¢ 
                        <kbd>Ctrl+Shift+H</kbd> Clear â€¢ 
                        <kbd>Escape</kbd> Close
                    </small>
                </div>
            </div>
        </div>
    </div>

    <!-- Tooltip Container -->
    <div id="tooltip" class="tooltip hidden" role="tooltip">
        <div class="tooltip-arrow"></div>
        <div class="tooltip-content"></div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Processing...</p>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
